{% extends 'Carrito_app/base.html' %}

{% load static %}

{% block title %}Actividades - Ailes du Monde{% endblock %}

{% block content %}
<div class="bg-gray-50 min-h-screen">
  <!-- Hero Section -->
  <div class="relative py-28 bg-cover bg-center overflow-hidden" style="background-image: ">
    <div class="absolute inset-0 bg-gradient-to-r from-orange-700 to-red-700 opacity-80"></div>
    <div class="relative container mx-auto px-6 text-center text-white z-10">
      <h1 class="text-5xl md:text-6xl font-extrabold mb-6 tracking-tight animate-fadeIn">Vive Experiencias Inolvidables</h1>
      <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto font-light animate-fadeIn" style="animation-delay: 0.5s;">Tours, excursiones, aventuras y actividades culturales para enriquecer tu viaje. Descubre lo mejor de cada destino con guías expertos.</p>
      <div class="flex flex-col md:flex-row justify-center space-y-4 md:space-y-0 md:space-x-6 animate-fadeIn" style="animation-delay: 1s;">
        <a href="#buscador" class="bg-white text-orange-700 px-8 py-4 rounded-full font-semibold hover:bg-orange-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">Buscar Actividades</a>
        <a href="{% url 'contacto' %}" class="border-2 border-white text-white px-8 py-4 rounded-full font-semibold hover:bg-white hover:text-orange-700 transition-all">Sugerir Actividad</a>
      </div>
    </div>
    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
      <i data-lucide="chevron-down" class="h-8 w-8 text-white"></i>
    </div>
  </div>

  <!-- Buscador de Actividades -->
  <div class="container mx-auto px-6 -mt-20 relative z-10 mb-20" id="buscador">
    <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
      <h2 class="text-2xl font-bold text-center mb-6 flex items-center justify-center animate-fadeIn">
        <i data-lucide="search" class="mr-3 h-6 w-6 text-orange-600"></i> Encuentra tu Aventura
      </h2>
      <form method="GET" action="{% url 'actividades' %}" class="grid grid-cols-1 md:grid-cols-2  lg:grid-cols-4 gap-6 items-end">
        <div class="space-y-2">
          <label class="text-sm font-medium text-gray-700 flex items-center"><i data-lucide="map-pin" class="h-4 w-4 mr-1"></i> Destino</label>
          <select name="destino" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 py-3 px-4">
            <option value="">Todos los Destinos</option>
            {% for d in destinos %}
              <option value="{{ d.id }}" {% if request.GET.destino == d.id|stringformat:"s" %}selected{% endif %}>{{ d.nombre }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium text-gray-700 flex items-center"><i data-lucide="calendar" class="h-4 w-4 mr-1"></i> Fecha</label>
          <input type="date" name="fecha" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 py-3 px-4">
        </div>
        <div class="space-y-2">
          <label class="text-sm font-medium text-gray-700 flex items-center"><i data-lucide="users" class="h-4 w-4 mr-1"></i> Personas</label>
          <select name="personas" class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-orange-500 focus:border-orange-500 py-3 px-4">
            <option>1 Persona</option>
            <option>2 Personas</option>
            <option>3-5 Personas</option>
            <option>6+ Personas</option>
          </select>
        </div>
        <div class="flex items-end">
          <button type="submit" class="w-full bg-orange-600 hover:bg-orange-700 text-white rounded-lg py-3 px-6 flex items-center justify-center transition-all transform hover:scale-105">
            <i data-lucide="search" class="h-5 w-5 mr-2"></i> Buscar
          </button>
        </div>
      </form>
      <div class="flex flex-col md:flex-row items-center justify-center mt-6 space-y-4 md:space-y-0 md:space-x-6">
        <select name="tipo" class="w-64 border-gray-300 rounded-lg py-3 px-4 shadow-sm focus:ring-orange-500 focus:border-orange-500">
          <option>Tipo de Actividad</option>
          <option>Tour Cultural</option>
          <option>Aventura</option>
          <option>Gastronómico</option>
          <option>Naturaleza</option>
          <option>Deportivo</option>
        </select>
        <div class="flex items-center space-x-2">
          <input type="checkbox" id="disponible" class="rounded text-orange-600 focus:ring-orange-500">
          <label for="disponible" class="text-sm text-gray-700">Solo disponibles ahora</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Beneficios de Actividades -->
  <div class="container mx-auto px-6 py-20">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4 animate-fadeIn">Por Qué Reservar con Nosotros</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto animate-fadeIn" style="animation-delay: 0.3s;">Experiencias curadas, guías certificados y flexibilidad total para tu aventura perfecta.</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-2 border border-gray-100 animate-fadeInCard" style="animation-delay: 0s;">
        <i data-lucide="award" class="h-16 w-16 text-orange-600 mb-6 mx-auto"></i>
        <h3 class="text-2xl font-bold text-gray-800 mb-3">Guías Expertos</h3>
        <p class="text-gray-600">Profesionales locales con conocimiento profundo de cada destino y actividad.</p>
      </div>
      <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-2 border border-gray-100 animate-fadeInCard" style="animation-delay: 0.2s;">
        <i data-lucide="shield-check" class="h-16 w-16 text-red-600 mb-6 mx-auto"></i>
        <h3 class="text-2xl font-bold text-gray-800 mb-3">Seguro Incluido</h3>
        <p class="text-gray-600">Cobertura de accidentes y cancelación gratuita hasta 24 hs antes.</p>
      </div>
      <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-2 border border-gray-100 animate-fadeInCard" style="animation-delay: 0.4s;">
        <i data-lucide="percent" class="h-16 w-16 text-orange-600 mb-6 mx-auto"></i>
        <h3 class="text-2xl font-bold text-gray-800 mb-3">Precios Exclusivos</h3>
        <p class="text-gray-600">Descuentos grupales, paquetes familiares y ofertas estacionales.</p>
      </div>
    </div>
  </div>

  <!-- Actividades Populares -->
  <div class="container mx-auto px-6 py-20">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4 animate-fadeIn">Nuestras Actividades Más Populares</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto animate-fadeIn" style="animation-delay: 0.3s;">Explora opciones verificadas con reseñas reales. Reserva ahora y vive la emoción.</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% if actividades %}
        {% for actividad in actividades %}
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-all duration-300 border border-gray-100 animate-fadeInCard">
          <div class="relative">
            {% if actividad.imagen %}
            <img src="{{ actividad.imagen.url }}" alt="{{ actividad.nombre }}" class="w-full h-56 object-cover">
            {% else %}
            <img src="{% static 'Carrito_app/img/default_activity.jpg' %}" alt="Imagen no disponible" class="w-full h-56 object-cover">
            {% endif %}
            <div class="absolute top-4 right-4 bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-semibold">{{ actividad.tipo }}</div>
            {% if actividad.popular %}<div class="absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">Popular</div>{% endif %}
          </div>
          <div class="p-6 flex flex-col flex-grow">
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-2xl font-semibold text-gray-800 flex items-center"><i data-lucide="zap" class="h-6 w-6 mr-2 text-orange-600"></i> {{ actividad.nombre }}</h3>
              <div class="flex items-center text-yellow-500">
                <i data-lucide="star" class="h-5 w-5 fill-current"></i>
                <span class="ml-1 font-bold text-gray-700">{{ actividad.rating|floatformat:1 }}</span>
                <span class="ml-1 text-sm text-gray-500">({{ actividad.resenas }} reseñas)</span>
              </div>
            </div>
            <div class="flex items-center text-gray-600 mb-2">
              <i data-lucide="map-pin" class="h-5 w-5 mr-2"></i> {{ actividad.destino.nombre }}
            </div>
            <p class="text-gray-600 mb-4 flex-grow">{{ actividad.descripcion|truncatewords:25 }}</p>
            <div class="flex items-center space-x-4 mb-4 text-sm text-gray-600">
              <span><i data-lucide="clock" class="h-4 w-4 mr-1 inline"></i> {{ actividad.duracion }} horas</span>
              <span>•</span>
              <span><i data-lucide="users" class="h-4 w-4 mr-1 inline"></i> Hasta {{ actividad.capacidad }} personas</span>
            </div>
            <div class="flex flex-wrap gap-2 mb-4">
              {% if actividad.tags %}
              
                  {% for tag in tags|slice:":3" %}
                    <span class="border border-orange-200 text-xs px-2 py-1 rounded"></span>
                  {% endfor %}
               
              {% endif %}
            </div>
            <div class="mt-auto pt-4 border-t border-gray-200 flex justify-between items-center">
              <p class="text-3xl font-bold text-orange-600">${{ actividad.precio|floatformat:2 }} <span class="text-sm font-normal text-gray-500">/persona</span></p>
              <div class="flex space-x-3">
                <a href="{% url 'add_to_cart' actividad.id %}" class="bg-orange-100 text-orange-700 hover:bg-orange-200 p-3 rounded-lg transition-all flex items-center"><i data-lucide="shopping-cart" class="h-5 w-5"></i></a>
                <a href="{% url 'actividad_detalle' actividad.id %}" class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold transition-all">Reservar</a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <div class="lg:col-span-3 text-center py-16 bg-white rounded-2xl shadow-lg">
          <i data-lucide="alert-circle" class="h-20 w-20 text-gray-400 mx-auto mb-6"></i>
          <h3 class="text-2xl font-semibold text-gray-700 mb-2">No hay actividades disponibles</h3>
          <p class="text-gray-500 mb-6">Intenta ajustar tus filtros o regresa más tarde para nuevas opciones.</p>
          <a href="{% url 'actividades' %}" class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold transition-all">Recargar</a>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Testimonios -->
  <div class="container mx-auto px-6 py-20 bg-orange-50 rounded-2xl mb-20">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4 animate-fadeIn">Lo Que Dicen Nuestros Aventureros</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto animate-fadeIn" style="animation-delay: 0.3s;">Experiencias reales de viajeros que han vivido nuestras actividades.</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="bg-white p-6 rounded-xl shadow-md animate-fadeInCard" style="animation-delay: 0s;">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-500">
            <i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i>
          </div>
        </div>
        <p class="text-gray-600 italic mb-4">"El tour en Bariloche fue increíble, paisajes espectaculares y guía muy conocedor."</p>
        <div class="flex items-center">
          <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Carlos R." class="w-12 h-12 rounded-full mr-3">
          <div>
            <p class="font-semibold">Carlos R.</p>
            <p class="text-sm text-gray-500">Aventurero verificado</p>
          </div>
        </div>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-md animate-fadeInCard" style="animation-delay: 0.2s;">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-500">
            <i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5"></i>
          </div>
        </div>
        <p class="text-gray-600 italic mb-4">"Clase de cocina en Mendoza: divertida y deliciosa. Recomendada para foodies."</p>
        <div class="flex items-center">
          <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Laura M." class="w-12 h-12 rounded-full mr-3">
          <div>
            <p class="font-semibold">Laura M.</p>
            <p class="text-sm text-gray-500">Aventurero verificado</p>
          </div>
        </div>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-md animate-fadeInCard" style="animation-delay: 0.4s;">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-500">
            <i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i><i data-lucide="star" class="h-5 w-5 fill-current"></i>
          </div>
        </div>
        <p class="text-gray-600 italic mb-4">"Rafting en el Norte: adrenalina pura y seguridad prioritaria. ¡Volveré!"</p>
        <div class="flex items-center">
          <img src="https://randomuser.me/api/portraits/men/68.jpg" alt="Pedro S." class="w-12 h-12 rounded-full mr-3">
          <div>
            <p class="font-semibold">Pedro S.</p>
            <p class="text-sm text-gray-500">Aventurero verificado</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA Final -->
  <div class="container mx-auto px-6 py-20">
    <section class="bg-orange-600 text-white rounded-2xl p-8 text-center">
      <i data-lucide="headphones" class="h-16 w-16 mb-6 mx-auto"></i>
      <h3 class="text-3xl font-bold mb-4">¿Listo para tu Próxima Aventura?</h3>
      <p class="text-lg mb-8 max-w-2xl mx-auto">Contáctanos para recomendaciones personalizadas o reservas grupales.</p>
      <a href="{% url 'contacto' %}" class="bg-white text-orange-600 hover:bg-orange-50 px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 inline-flex items-center">
        <i data-lucide="phone" class="h-5 w-5 mr-2"></i> Contactar Asesor
      </a>
    </section>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  lucide.createIcons();
  // Delays dinámicos para cards
  document.querySelectorAll('.animate-fadeInCard').forEach((card, index) => {
    card.style.animationDelay = `${index * 0.2}s`;
  });
</script>
<style>
  .animate-fadeIn {
    animation: fadeIn 1.5s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeInCard {
    animation: fadeInCard 0.8s ease-out forwards;
    opacity: 0;
  }
  @keyframes fadeInCard {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
{% endblock %}