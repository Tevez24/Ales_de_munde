{% extends 'Carrito_app/base.html' %}
{% load static %}
{% block title %}Transporte - Ailes du Monde{% endblock %}

{% block content %}
<div class="bg-gray-60 min-h-screen">
  <!-- HERO SECTION - IMAGEN 100% VISIBLE -->
  <div class="relative h-96 md:h-[500px] bg-cover opacity " style="background-image: url('{% static 'Carrito_app/media/img/transporte2.jpg' %}');">
    <div class="relative container mx-auto px-6 h-full flex items-center justify-center text-center text-white">
      <div>
        <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
          TRANSPORTE CONFIABLE Y COMODO
        </h1>
        <p class="text-lg md:text-xl mb-6 max-w-2xl mx-auto font-medium">
          Transfers al aeropuerto, traslados urbanos, tours personalizados y más. 
          Seguridad, puntualidad y vehículos premium.
        </p>
        <a href="{% url 'contacto' %}" 
           class="inline-block bg-white text-blue-600 px-8 py-3 rounded-full font-bold hover:bg-blue-50 transition">
          Reserva Personalizada
        </a>
      </div>
    </div>
  </div>

  <!-- SERVICIOS DISPONIBLES -->
  <div class="container mx-auto px-6 py-16" id="servicios">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">SERVICIOS DE TRANSPORTE DISPONIBLES</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Elige entre una variedad de opciones adaptadas a tus necesidades.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {% if transportes %}
        {% for transporte in transportes %}
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-all duration-300 group">
          <!-- Imagen -->
          <div class="relative h-48">
            <img src="{% if transporte.imagen %}{{ transporte.imagen.url }}{% else %}https://images.unsplash.com/photo-1501785882288-1e2a1b0b2b2e?auto=format&fit=crop&w=800&q=80{% endif %}" 
                 alt="{{ transporte.nombre }}" class="w-full h-full object-cover group-hover:scale-105 transition">

            <!-- Tipo -->
            <div class="absolute top-3 left-3 bg-gradient-to-r from-blue-600 to-blue-400 text-white px-3 py-1 rounded-full text-xs font-bold uppercase">
              {{ transporte.get_tipo_display }}
            </div>

            <!-- EN OFERTA -->
            {% if transporte.precio < 3000 %}
            <div class="absolute top-3 right-3 bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold uppercase animate-pulse">
              EN OFERTA
            </div>
            {% endif %}
          </div>

          <!-- Contenido -->
          <div class="p-5">
            <div class="flex items-center text-green-600 text-sm mb-2">
              <i data-lucide="map-pin" class="h-4 w-4 mr-1"></i>
              <span>{{ transporte.origen }} → {{ transporte.destino }}</span>
            </div>

            <h3 class="text-lg font-bold text-gray-800 line-clamp-1 mb-1">
              {{ transporte.nombre }}
            </h3>

            <p class="text-sm text-gray-600 line-clamp-2 mb-3">
              {{ transporte.descripcion|default:"Traslado seguro y cómodo."|truncatewords:12 }}
            </p>

            <div class="flex items-center text-xs text-gray-500 mb-3">
              <i data-lucide="clock" class="h-4 w-4 mr-1"></i>
              <span>{{ transporte.duracion }}</span>
            </div>

            <div class="flex items-center justify-between mt-4">
              <p class="text-2xl font-extrabold text-blue-600">
                ${{ transporte.precio|floatformat:0 }},00
              </p>
            </div>

            <div class="flex gap-2 mt-4">
              <a href="{% url 'transporte_detalle' transporte.id %}" 
                 class="flex-1 bg-blue-100 text-blue-700 hover:bg-blue-200 px-4 py-2 rounded-lg font-medium text-sm text-center transition">
                Ver Detalles
              </a>
              <a href="{% url 'add_to_cart' 'transporte' transporte.id %}" 
                 class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium text-sm text-center transition flex items-center justify-center gap-1">
                <i data-lucide="shopping-cart" class="h-4 w-4"></i> Reservar
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <div class="col-span-full text-center py-16 bg-white rounded-2xl shadow">
          <i data-lucide="search-x" class="h-20 w-20 text-gray-400 mx-auto mb-4"></i>
          <h3 class="text-xl font-semibold text-gray-700">No se encontraron servicios</h3>
          <p class="text-gray-500 mt-2">Intenta más tarde o ajusta tus filtros.</p>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- NUEVA SECCIÓN: TRASBORDOS POR TIPO -->
  <div class="bg-gradient-to-b from-gray-50 to-white py-16">
    <div class="container mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-gray-800 mb-4">TIPOS DE TRASLADOS</h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Encuentra el servicio perfecto según tu necesidad.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- DESDE AEROPUERTO -->
        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
          <div class="flex items-center mb-4">
            <i data-lucide="plane-takeoff" class="h-12 w-12 mr-3"></i>
            <h3 class="text-2xl font-bold">Desde Aeropuerto</h3>
          </div>
          <p class="mb-4">Recogida en el aeropuerto con monitoreo de vuelos en tiempo real.</p>
          <ul class="space-y-2 text-sm">
            <li>Meet & Greet incluido</li>
            <li>Espera gratuita 60 min</li>
            <li>Vehículos premium</li>
          </ul>
          <a href="{% url 'transporte' %}?tipo_traslado=Desde+aeropuerto" 
             class="mt-6 inline-block bg-white text-blue-600 px-6 py-2 rounded-full font-bold hover:bg-blue-50 transition">
            Ver Opciones
          </a>
        </div>

        <!-- HACIA AEROPUERTO -->
        <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
          <div class="flex items-center mb-4">
            <i data-lucide="plane-landing" class="h-12 w-12 mr-3"></i>
            <h3 class="text-2xl font-bold">Hacia Aeropuerto</h3>
          </div>
          <p class="mb-4">Llegada puntual con antelación para tu vuelo.</p>
          <ul class="space-y-2 text-sm">
            <li>Salida programada</li>
            <li>Sin estrés por tráfico</li>
            <li>Check-in asistido</li>
          </ul>
          <a href="{% url 'transporte' %}?tipo_traslado=Hacia+aeropuerto" 
             class="mt-6 inline-block bg-white text-green-600 px-6 py-2 rounded-full font-bold hover:bg-green-50 transition">
            Ver Opciones
          </a>
        </div>

        <!-- TRASLADO URBANO -->
        <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
          <div class="flex items-center mb-4">
            <i data-lucide="car" class="h-12 w-12 mr-3"></i>
            <h3 class="text-2xl font-bold">Traslado Urbano</h3>
          </div>
          <p class="mb-4">Movilidad dentro de la ciudad, tours y traslados personalizados.</p>
          <ul class="space-y-2 text-sm">
            <li>Rutas flexibles</li>
            <li>Paradas incluidas</li>
            <li>Conductor local</li>
          </ul>
          <a href="{% url 'transporte' %}?tipo_traslado=Traslado+urbano" 
             class="mt-6 inline-block bg-white text-purple-600 px-6 py-2 rounded-full font-bold hover:bg-purple-50 transition">
            Ver Opciones
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA FINAL -->
  <div class="container mx-auto px-6 py-16 text-center">
    <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl p-10 border border-blue-200">
      <i data-lucide="headphones" class="h-16 w-16 text-blue-600 mb-4"></i>
      <h3 class="text-3xl font-bold text-gray-800 mb-3">¿Necesitas un traslado especial?</h3>
      <p class="text-gray-600 mb-6 max-w-xl mx-auto">Cotizaciones personalizadas, grupos grandes o rutas únicas.</p>
      <a href="{% url 'contacto' %}" 
         class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-full font-bold inline-flex items-center transition transform hover:scale-105">
        <i data-lucide="phone" class="h-5 w-5 mr-2"></i> Contactar Ahora
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  lucide.createIcons();
</script>
{% endblock %}